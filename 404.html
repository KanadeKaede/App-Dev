<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Quicki Quiz</title>
  <meta name="description" content="Test your knowledge with Quicki's interactive quiz powered by OpenTDB!">
  <meta name="keywords" content="quiz, online, test, opentdb, quicki">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Raleway:wght@500;700&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
</head>

<body class="page-quiz">

  <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="index.html" class="logo d-flex align-items-center me-auto">
        <h1 class="sitename">Quicki</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="courses.html">Courses</a></li>
          <li><a href="instructors.html">Instructors</a></li>
          <li><a href="quiz.html" class="active">Quiz</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted" href="enroll.html">Enroll Now</a>

    </div>
  </header>
  <!-- End Header -->

  <main class="main">

    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">Online Quiz</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="index.html">Home</a></li>
            <li class="current">Quiz</li>
          </ol>
        </nav>
      </div>
    </div>

    <!-- ======= Quiz Section ======= -->
    <section id="quiz" class="quiz section py-5">
      <div class="container" data-aos="fade-up">

        <div class="text-center mb-4">
          <h2>Test Your Knowledge!</h2>
          <p>Answer20 random questions and see how well you score.</p>
        </div>

        <div id="quiz-container" class="card p-4 shadow-sm text-center">
          <p>Loading quiz questions...</p>
        </div>

        <div class="text-center mt-4">
          <button id="restart-btn" class="btn btn-primary btn-lg" style="display:none;">Restart Quiz</button>
        </div>

      </div>
    </section>
    <!-- End Quiz Section -->

  </main>

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer accent-background">
    <div class="container text-center mt-4">
      <p>Â© <strong class="px-1 sitename">Quicki</strong> All Rights Reserved</p>
      <div class="credits">
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- ======= Quiz Script ======= -->
  <script>8
    const apiUrl = "https://opentdb.com/api.php?amount=20&category=18";
    const container = document.getElementById("quiz-container");
    const restartBtn = document.getElementById("restart-btn");

    let questions = [];
    let current = 0;
    let score = 0;

    async function loadQuiz() {
      container.innerHTML = "<p>Loading quiz questions...</p>";
      restartBtn.style.display = "none";
      try {
        const res = await fetch(apiUrl);
        const data = await res.json();
        questions = data.results;
        current = 0;
        score = 0;
        showQuestion();
      } catch (error) {
        container.innerHTML = "<p class='text-danger'>Failed to load quiz questions. Please try again later.</p>";
      }
    }

    function showQuestion() {
      if (current >= questions.length) {
        container.innerHTML = `
          <h3 class="text-center mb-3">Quiz Complete!</h3>
          <p class="text-center fs-5">Your Score: <strong>${score} / ${questions.length}</strong></p>
          <p class="text-muted">Want to try again? Click below to get new questions.</p>
        `;
        restartBtn.style.display = "inline-block";
        return;
      }

      const q = questions[current];
      const answers = [...q.incorrect_answers, q.correct_answer].sort(() => Math.random() - 0.5);

      container.innerHTML = `
        <h5 class="text-start">Question ${current + 1} of ${questions.length}</h5>
        <p class="mt-3 text-start">${decodeHTML(q.question)}</p>
        <div class="answers mt-3">
          ${answers.map(a => `
            <button class="btn btn-outline-primary w-100 my-1">${decodeHTML(a)}</button>
          `).join("")}
        </div>
      `;

      container.querySelectorAll("button").forEach(btn => {
        btn.addEventListener("click", () => {
          if (btn.textContent === decodeHTML(q.correct_answer)) {
            btn.classList.remove("btn-outline-primary");
            btn.classList.add("btn-success");
            score++;
          } else {
            btn.classList.remove("btn-outline-primary");
            btn.classList.add("btn-danger");
          }

          // Disable all buttons after one click
          container.querySelectorAll("button").forEach(b => b.disabled = true);

          setTimeout(() => {
            current++;
            showQuestion();
          }, 800);
        });
      });
    }

    function decodeHTML(html) {
      const txt = document.createElement("textarea");
      txt.innerHTML = html;
      return txt.value;
    }

    restartBtn.addEventListener("click", () => {
      loadQuiz();
    });

    loadQuiz();
  </script>

</body>
</html>
